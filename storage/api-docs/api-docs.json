{
    "openapi": "3.0.0",
    "info": {
        "title": "Tài liệu API cho BTL Nhóm 2",
        "description": "Đây là tài liệu API cho ứng dụng điểm danh/quản lý lịch dạy.",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "API Server"
        }
    ],
    "paths": {
        "/api/attendances": {
            "get": {
                "tags": [
                    "Attendance"
                ],
                "summary": "Lấy DS Điểm danh (Chưa triển khai)",
                "operationId": "getAttendancesList",
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Attendance"
                ],
                "summary": "Tạo Điểm danh (Chưa triển khai)",
                "operationId": "storeAttendance",
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/attendances/{attendance}": {
            "get": {
                "tags": [
                    "Attendance"
                ],
                "summary": "Lấy 1 Điểm danh (Chưa triển khai)",
                "operationId": "getAttendanceById",
                "parameters": [
                    {
                        "name": "attendance",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Attendance"
                ],
                "summary": "Cập nhật Điểm danh (Chưa triển khai)",
                "operationId": "updateAttendance",
                "parameters": [
                    {
                        "name": "attendance",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Attendance"
                ],
                "summary": "Xóa Điểm danh (Chưa triển khai)",
                "operationId": "deleteAttendance",
                "parameters": [
                    {
                        "name": "attendance",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/schedules/{schedule}/students-attendance": {
            "get": {
                "tags": [
                    "Attendance"
                ],
                "summary": "Lấy danh sách SV và trạng thái điểm danh của 1 lịch học",
                "operationId": "getStudentsAndAttendanceForSchedule",
                "parameters": [
                    {
                        "name": "schedule",
                        "in": "path",
                        "description": "ID của lịch học (schedule)",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công. Trả về mảng danh sách SV và status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "student_id": {
                                                "type": "integer"
                                            },
                                            "student_name": {
                                                "type": "string"
                                            },
                                            "status": {
                                                "type": "string",
                                                "enum": [
                                                    "present",
                                                    "absent",
                                                    "late"
                                                ]
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/attendances/bulk-save": {
            "post": {
                "tags": [
                    "Attendance"
                ],
                "summary": "Lưu điểm danh hàng loạt cho một lịch học",
                "operationId": "saveBulkAttendance",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "schedule_id",
                                    "attendances"
                                ],
                                "properties": {
                                    "schedule_id": {
                                        "description": "ID của lịch học",
                                        "type": "integer",
                                        "example": 15
                                    },
                                    "attendances": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "student_id",
                                                "status"
                                            ],
                                            "properties": {
                                                "student_id": {
                                                    "type": "integer",
                                                    "example": 101
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "present",
                                                        "absent",
                                                        "late"
                                                    ],
                                                    "example": "present"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Lưu điểm danh thành công"
                    },
                    "422": {
                        "description": "Dữ liệu không hợp lệ"
                    },
                    "500": {
                        "description": "Lỗi server khi lưu"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Đăng nhập người dùng",
                "operationId": "loginUser",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "teacher@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "password"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Đăng nhập thành công",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "user": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Email hoặc mật khẩu không chính xác"
                    },
                    "422": {
                        "description": "Dữ liệu không hợp lệ (Validation error)"
                    }
                }
            }
        },
        "/api/leaverequests": {
            "get": {
                "tags": [
                    "Leave Requests"
                ],
                "summary": "Lấy DS Đơn nghỉ (Chưa triển khai)",
                "operationId": "getLeaveRequestsList",
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Leave Requests"
                ],
                "summary": "Gửi yêu cầu xin nghỉ (Dùng route resource /api/leaverequests)",
                "description": "Route /api/leave-requests (custom) cũng trỏ về đây",
                "operationId": "storeLeaveRequestResource",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "schedule_id",
                                    "reason"
                                ],
                                "properties": {
                                    "schedule_id": {
                                        "description": "ID của lịch dạy muốn nghỉ",
                                        "type": "integer",
                                        "example": 12
                                    },
                                    "reason": {
                                        "description": "Lý do xin nghỉ",
                                        "type": "string",
                                        "example": "Bị ốm"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Gửi yêu cầu thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "401": {
                        "description": "Chưa đăng nhập"
                    },
                    "422": {
                        "description": "Lỗi validation"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/leave-requests": {
            "post": {
                "tags": [
                    "Leave Requests"
                ],
                "summary": "Gửi yêu cầu xin nghỉ (Dùng route /api/leave-requests)",
                "description": "Route /api/leaverequests (resource) cũng trỏ về đây",
                "operationId": "storeLeaveRequest",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "schedule_id",
                                    "reason"
                                ],
                                "properties": {
                                    "schedule_id": {
                                        "description": "ID của lịch dạy muốn nghỉ",
                                        "type": "integer",
                                        "example": 12
                                    },
                                    "reason": {
                                        "description": "Lý do xin nghỉ",
                                        "type": "string",
                                        "example": "Bị ốm"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Gửi yêu cầu thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "401": {
                        "description": "Chưa đăng nhập"
                    },
                    "422": {
                        "description": "Lỗi validation"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/leaverequests/{leaverequest}": {
            "get": {
                "tags": [
                    "Leave Requests"
                ],
                "summary": "Xem 1 Đơn nghỉ (Chưa triển khai)",
                "operationId": "getLeaveRequestById",
                "parameters": [
                    {
                        "name": "leaverequest",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Leave Requests"
                ],
                "summary": "Cập nhật Đơn nghỉ (Chưa triển khai)",
                "operationId": "updateLeaveRequest",
                "parameters": [
                    {
                        "name": "leaverequest",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Leave Requests"
                ],
                "summary": "Xóa Đơn nghỉ (Chưa triển khai)",
                "operationId": "deleteLeaveRequest",
                "parameters": [
                    {
                        "name": "leaverequest",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{user}/leave-history": {
            "get": {
                "tags": [
                    "Leave Requests"
                ],
                "summary": "Lấy lịch sử xin nghỉ của giáo viên",
                "operationId": "getLeaveHistoryForTeacher",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của giáo viên",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "leave_request_id": {
                                                "type": "integer"
                                            },
                                            "subject_name": {
                                                "type": "string"
                                            },
                                            "leave_status": {
                                                "type": "string",
                                                "enum": [
                                                    "pending",
                                                    "approved",
                                                    "rejected"
                                                ]
                                            },
                                            "reason": {
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/makeupclasses": {
            "get": {
                "tags": [
                    "Makeup Classes"
                ],
                "summary": "Lấy DS Lớp dạy bù (Chưa triển khai)",
                "operationId": "getMakeupClassesList",
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Makeup Classes"
                ],
                "summary": "Gửi yêu cầu dạy bù (Dùng route resource /api/makeupclasses)",
                "description": "Route /api/makeup-classes (custom) cũng trỏ về đây",
                "operationId": "storeMakeupClassResource",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "original_schedule_id",
                                    "new_schedule_date",
                                    "new_session",
                                    "new_room_id"
                                ],
                                "properties": {
                                    "original_schedule_id": {
                                        "description": "ID lịch dạy GỐC (buổi nghỉ)",
                                        "type": "integer",
                                        "example": 12
                                    },
                                    "new_schedule_date": {
                                        "description": "Ngày dạy bù (Y-m-d)",
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-10-30"
                                    },
                                    "new_session": {
                                        "description": "Ca/tiết dạy bù",
                                        "type": "string",
                                        "example": "3-4"
                                    },
                                    "new_room_id": {
                                        "description": "ID của phòng dạy bù",
                                        "type": "integer",
                                        "example": 5
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Gửi yêu cầu dạy bù thành công!",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "401": {
                        "description": "Chưa đăng nhập"
                    },
                    "422": {
                        "description": "Lỗi validation"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/makeup-classes": {
            "post": {
                "tags": [
                    "Makeup Classes"
                ],
                "summary": "Gửi yêu cầu dạy bù (Dùng route /api/makeup-classes)",
                "description": "Route /api/makeupclasses (resource) cũng trỏ về đây",
                "operationId": "storeMakeupClass",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "original_schedule_id",
                                    "new_schedule_date",
                                    "new_session",
                                    "new_room_id"
                                ],
                                "properties": {
                                    "original_schedule_id": {
                                        "description": "ID lịch dạy GỐC (buổi nghỉ)",
                                        "type": "integer",
                                        "example": 12
                                    },
                                    "new_schedule_date": {
                                        "description": "Ngày dạy bù (Y-m-d)",
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-10-30"
                                    },
                                    "new_session": {
                                        "description": "Ca/tiết dạy bù",
                                        "type": "string",
                                        "example": "3-4"
                                    },
                                    "new_room_id": {
                                        "description": "ID của phòng dạy bù",
                                        "type": "integer",
                                        "example": 5
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Gửi yêu cầu dạy bù thành công!",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "401": {
                        "description": "Chưa đăng nhập"
                    },
                    "422": {
                        "description": "Lỗi validation"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/makeupclasses/{makeupclass}": {
            "get": {
                "tags": [
                    "Makeup Classes"
                ],
                "summary": "Xem 1 Lớp bù (Chưa triển khai)",
                "operationId": "getMakeupClassById",
                "parameters": [
                    {
                        "name": "makeupclass",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Makeup Classes"
                ],
                "summary": "Cập nhật Lớp bù (Chưa triển khai)",
                "operationId": "updateMakeupClass",
                "parameters": [
                    {
                        "name": "makeupclass",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Makeup Classes"
                ],
                "summary": "Xóa Lớp bù (Chưa triển khai)",
                "operationId": "deleteMakeupClass",
                "parameters": [
                    {
                        "name": "makeupclass",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/schedules": {
            "get": {
                "tags": [
                    "Schedules (CRUD)"
                ],
                "summary": "Lấy danh sách Lịch học (Chưa triển khai)",
                "operationId": "getSchedulesList",
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Schedules (CRUD)"
                ],
                "summary": "Tạo Lịch học (Chưa triển khai)",
                "operationId": "storeSchedule",
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/schedules/{schedule}": {
            "get": {
                "tags": [
                    "Schedules (CRUD)"
                ],
                "summary": "Lấy 1 Lịch học (Chưa triển khai)",
                "operationId": "getScheduleById",
                "parameters": [
                    {
                        "name": "schedule",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Schedules (CRUD)"
                ],
                "summary": "Cập nhật Lịch học (Chưa triển khai)",
                "operationId": "updateSchedule",
                "parameters": [
                    {
                        "name": "schedule",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Schedules (CRUD)"
                ],
                "summary": "Xóa Lịch học (Chưa triển khai)",
                "operationId": "deleteSchedule",
                "parameters": [
                    {
                        "name": "schedule",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chưa triển khai"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{user}/schedules-by-date": {
            "get": {
                "tags": [
                    "Schedules"
                ],
                "summary": "Lấy lịch dạy (theo ngày) của giáo viên (cho dropdown xin nghỉ)",
                "operationId": "getSchedulesByDateForTeacher",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của giáo viên",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "date",
                        "in": "query",
                        "description": "Ngày cần lấy lịch (Y-m-d)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2025-10-24"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "schedule_id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "display_name": {
                                                "type": "string",
                                                "example": "Lập trình Web (IT1) - 1-2"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Lỗi validate ngày"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{user}/available-schedules-for-leave": {
            "get": {
                "tags": [
                    "Schedules"
                ],
                "summary": "Lấy lịch dạy SẮP TỚI của giáo viên (để chọn khi xin nghỉ)",
                "operationId": "getAvailableSchedulesForLeave",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của giáo viên",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "schedule_id": {
                                                "type": "integer",
                                                "example": 10
                                            },
                                            "display_name": {
                                                "type": "string",
                                                "example": "24/10/2025 - 1-2 - Lập trình Web (IT1)"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users": {
            "get": {
                "tags": [
                    "Users (CRUD)"
                ],
                "summary": "Lấy danh sách người dùng (phân trang 50)",
                "operationId": "getUsersList",
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Users (CRUD)"
                ],
                "summary": "Tạo mới người dùng",
                "operationId": "storeUser",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "first_name",
                                    "last_name",
                                    "email",
                                    "password",
                                    "phone_number",
                                    "role",
                                    "status"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Nguyễn Văn A"
                                    },
                                    "first_name": {
                                        "type": "string",
                                        "example": "Nguyễn Văn"
                                    },
                                    "last_name": {
                                        "type": "string",
                                        "example": "A"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "a@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "phone_number": {
                                        "type": "string",
                                        "example": "0905123456"
                                    },
                                    "role": {
                                        "type": "string",
                                        "enum": [
                                            "student",
                                            "teacher",
                                            "training_office",
                                            "head_of_department"
                                        ]
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "active",
                                            "inactive",
                                            "banned"
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Tạo tài khoản thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Dữ liệu không hợp lệ (Validation error)"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{user}": {
            "get": {
                "tags": [
                    "Users (CRUD)"
                ],
                "summary": "Xem thông tin 1 người dùng",
                "operationId": "getUserById",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của người dùng",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "404": {
                        "description": "Không tìm thấy người dùng"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Users (CRUD)"
                ],
                "summary": "Cập nhật thông tin người dùng (Gửi bằng PUT)",
                "description": "Lưu ý: Route list của bạn dùng PUT|PATCH, nhưng form data chỉ hỗ trợ POST. Nếu dùng Postman, hãy chọn PUT. Nếu dùng form HTML, bạn phải dùng POST và thêm `_method: 'PUT'` vào body.",
                "operationId": "updateUser",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của người dùng",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Gửi các trường cần cập nhật. Nếu dùng `application/x-www-form-urlencoded` thì phải thêm `_method: 'PUT'`",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Nguyễn Văn B"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "b@example.com"
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "active",
                                            "inactive"
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Cập nhật thông tin thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "404": {
                        "description": "Không tìm thấy người dùng"
                    },
                    "422": {
                        "description": "Dữ liệu không hợp lệ"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Users (CRUD)"
                ],
                "summary": "Xóa người dùng",
                "operationId": "deleteUser",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của người dùng",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Xóa người dùng thành công"
                    },
                    "404": {
                        "description": "Không tìm thấy người dùng"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{user}/home-summary": {
            "get": {
                "tags": [
                    "Teachers (User)"
                ],
                "summary": "Lấy tóm tắt trang chủ cho GIÁO VIÊN",
                "operationId": "getTeacherHomeSummary",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của giáo viên",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{user}/schedule-data": {
            "get": {
                "tags": [
                    "Teachers (User)"
                ],
                "summary": "Lấy dữ liệu lịch dạy (hôm nay, tuần) cho GIÁO VIÊN",
                "operationId": "getTeacherScheduleData",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của giáo viên",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "week_offset",
                        "in": "query",
                        "description": "Offset tuần (0 = tuần này, 1 = tuần sau, -1 = tuần trước)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{user}/report-data": {
            "get": {
                "tags": [
                    "Teachers (User)"
                ],
                "summary": "Lấy dữ liệu báo cáo cho GIÁO VIÊN",
                "operationId": "getTeacherReportData",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của giáo viên",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "start_date",
                        "in": "query",
                        "description": "Ngày bắt đầu (Y-m-d)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "end_date",
                        "in": "query",
                        "description": "Ngày kết thúc (Y-m-d)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Lỗi validate ngày tháng"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{user}/leave-makeup-summary": {
            "get": {
                "tags": [
                    "Teachers (User)"
                ],
                "summary": "Lấy tóm tắt số buổi nghỉ/chờ bù (giáo viên)",
                "operationId": "getTeacherLeaveMakeupSummary",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của giáo viên",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{user}/pending-makeup": {
            "get": {
                "tags": [
                    "Teachers (User)"
                ],
                "summary": "Lấy danh sách lịch nghỉ CHỜ dạy bù (giáo viên)",
                "operationId": "getTeacherPendingMakeupSchedules",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của giáo viên",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/students/{user}/home-summary": {
            "get": {
                "tags": [
                    "Students (User)"
                ],
                "summary": "Lấy tóm tắt trang chủ cho SINH VIÊN",
                "operationId": "getStudentHomeSummary",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của sinh viên",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "403": {
                        "description": "Không phải sinh viên"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/students/{user}/schedule/week": {
            "get": {
                "tags": [
                    "Students (User)"
                ],
                "summary": "Lấy lịch học CẢ TUẦN cho SINH VIÊN",
                "operationId": "getStudentWeeklySchedule",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID của sinh viên",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thành công (Trả về 1 danh sách các lịch học)",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "403": {
                        "description": "Không phải sinh viên / Không có quyền"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "Sử dụng Bearer token (Sanctum) sau khi đăng nhập",
                "name": "Bearer Token",
                "in": "header",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Attendance",
            "description": "Attendance"
        },
        {
            "name": "Authentication",
            "description": "Authentication"
        },
        {
            "name": "Leave Requests",
            "description": "Leave Requests"
        },
        {
            "name": "Makeup Classes",
            "description": "Makeup Classes"
        },
        {
            "name": "Schedules (CRUD)",
            "description": "Schedules (CRUD)"
        },
        {
            "name": "Schedules",
            "description": "Schedules"
        },
        {
            "name": "Users (CRUD)",
            "description": "Users (CRUD)"
        },
        {
            "name": "Teachers (User)",
            "description": "Teachers (User)"
        },
        {
            "name": "Students (User)",
            "description": "Students (User)"
        }
    ]
}